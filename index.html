
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>nicescad API Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nicescad-api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="nicescad API Documentation" class="md-header__button md-logo" aria-label="nicescad API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            nicescad API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="nicescad API Documentation" class="md-nav__button md-logo" aria-label="nicescad API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    nicescad API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nicescad" class="md-nav__link">
    <span class="md-ellipsis">
      nicescad
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.axes_helper" class="md-nav__link">
    <span class="md-ellipsis">
      axes_helper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="axes_helper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper" class="md-nav__link">
    <span class="md-ellipsis">
      AxesHelper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AxesHelper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper.set_colors" class="md-nav__link">
    <span class="md-ellipsis">
      set_colors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper.toggle_axes" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_axes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter" class="md-nav__link">
    <span class="md-ellipsis">
      blockscad_converter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="blockscad_converter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter" class="md-nav__link">
    <span class="md-ellipsis">
      BlockscadConverter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockscadConverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter--methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.__init__--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.convert_to_scad" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_scad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="convert_to_scad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.convert_to_scad--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.convert_to_scad--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      nicescad_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="nicescad_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.NiceScadCmd" class="md-nav__link">
    <span class="md-ellipsis">
      NiceScadCmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiceScadCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.NiceScadCmd.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.NiceScadCmd.getArgParser" class="md-nav__link">
    <span class="md-ellipsis">
      getArgParser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.openscad" class="md-nav__link">
    <span class="md-ellipsis">
      openscad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="openscad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenSCADLexer" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSCADLexer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad" class="md-nav__link">
    <span class="md-ellipsis">
      OpenScad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenScad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.cleanup_tmp_file" class="md-nav__link">
    <span class="md-ellipsis">
      cleanup_tmp_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.highlight_code" class="md-nav__link">
    <span class="md-ellipsis">
      highlight_code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.openscad_str_to_file" class="md-nav__link">
    <span class="md-ellipsis">
      openscad_str_to_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.render_to_file_async" class="md-nav__link">
    <span class="md-ellipsis">
      render_to_file_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.write_to_tmp_file" class="md-nav__link">
    <span class="md-ellipsis">
      write_to_tmp_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.process" class="md-nav__link">
    <span class="md-ellipsis">
      process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.process.Subprocess" class="md-nav__link">
    <span class="md-ellipsis">
      Subprocess
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subprocess">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.process.Subprocess.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.process.Subprocess.run_async" class="md-nav__link">
    <span class="md-ellipsis">
      run_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.solidservice" class="md-nav__link">
    <span class="md-ellipsis">
      solidservice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="solidservice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer" class="md-nav__link">
    <span class="md-ellipsis">
      FastAPIServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FastAPIServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer.convert" class="md-nav__link">
    <span class="md-ellipsis">
      convert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.SolidConverter" class="md-nav__link">
    <span class="md-ellipsis">
      SolidConverter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SolidConverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.SolidConverter.convert_to_openscad" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_openscad
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.webserver" class="md-nav__link">
    <span class="md-ellipsis">
      webserver
    </span>
  </a>
  
    <nav class="md-nav" aria-label="webserver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution" class="md-nav__link">
    <span class="md-ellipsis">
      NiceScadSolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiceScadSolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.code_changed" class="md-nav__link">
    <span class="md-ellipsis">
      code_changed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.configure_settings" class="md-nav__link">
    <span class="md-ellipsis">
      configure_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.highlight_code" class="md-nav__link">
    <span class="md-ellipsis">
      highlight_code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.open_file" class="md-nav__link">
    <span class="md-ellipsis">
      open_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.pick_color" class="md-nav__link">
    <span class="md-ellipsis">
      pick_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.prepare_ui" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.read_input" class="md-nav__link">
    <span class="md-ellipsis">
      read_input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.render" class="md-nav__link">
    <span class="md-ellipsis">
      render
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.save_file" class="md-nav__link">
    <span class="md-ellipsis">
      save_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.setup_pygments" class="md-nav__link">
    <span class="md-ellipsis">
      setup_pygments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.toggle_axes" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_axes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.toggle_grid" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_grid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadWebServer" class="md-nav__link">
    <span class="md-ellipsis">
      NiceScadWebServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiceScadWebServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadWebServer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nicescad" class="md-nav__link">
    <span class="md-ellipsis">
      nicescad
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.axes_helper" class="md-nav__link">
    <span class="md-ellipsis">
      axes_helper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="axes_helper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper" class="md-nav__link">
    <span class="md-ellipsis">
      AxesHelper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AxesHelper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper.set_colors" class="md-nav__link">
    <span class="md-ellipsis">
      set_colors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.axes_helper.AxesHelper.toggle_axes" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_axes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter" class="md-nav__link">
    <span class="md-ellipsis">
      blockscad_converter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="blockscad_converter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter" class="md-nav__link">
    <span class="md-ellipsis">
      BlockscadConverter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockscadConverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter--methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.__init__--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.convert_to_scad" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_scad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="convert_to_scad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.convert_to_scad--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.blockscad_converter.BlockscadConverter.convert_to_scad--returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      nicescad_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="nicescad_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.NiceScadCmd" class="md-nav__link">
    <span class="md-ellipsis">
      NiceScadCmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiceScadCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.NiceScadCmd.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.NiceScadCmd.getArgParser" class="md-nav__link">
    <span class="md-ellipsis">
      getArgParser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.nicescad_cmd.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.openscad" class="md-nav__link">
    <span class="md-ellipsis">
      openscad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="openscad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenSCADLexer" class="md-nav__link">
    <span class="md-ellipsis">
      OpenSCADLexer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad" class="md-nav__link">
    <span class="md-ellipsis">
      OpenScad
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OpenScad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.cleanup_tmp_file" class="md-nav__link">
    <span class="md-ellipsis">
      cleanup_tmp_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.highlight_code" class="md-nav__link">
    <span class="md-ellipsis">
      highlight_code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.openscad_str_to_file" class="md-nav__link">
    <span class="md-ellipsis">
      openscad_str_to_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.render_to_file_async" class="md-nav__link">
    <span class="md-ellipsis">
      render_to_file_async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.openscad.OpenScad.write_to_tmp_file" class="md-nav__link">
    <span class="md-ellipsis">
      write_to_tmp_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.process" class="md-nav__link">
    <span class="md-ellipsis">
      process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.process.Subprocess" class="md-nav__link">
    <span class="md-ellipsis">
      Subprocess
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subprocess">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.process.Subprocess.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.process.Subprocess.run_async" class="md-nav__link">
    <span class="md-ellipsis">
      run_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.solidservice" class="md-nav__link">
    <span class="md-ellipsis">
      solidservice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="solidservice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer" class="md-nav__link">
    <span class="md-ellipsis">
      FastAPIServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FastAPIServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer.convert" class="md-nav__link">
    <span class="md-ellipsis">
      convert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.FastAPIServer.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.SolidConverter" class="md-nav__link">
    <span class="md-ellipsis">
      SolidConverter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SolidConverter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.solidservice.SolidConverter.convert_to_openscad" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_openscad
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nicescad.webserver" class="md-nav__link">
    <span class="md-ellipsis">
      webserver
    </span>
  </a>
  
    <nav class="md-nav" aria-label="webserver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution" class="md-nav__link">
    <span class="md-ellipsis">
      NiceScadSolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiceScadSolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.code_changed" class="md-nav__link">
    <span class="md-ellipsis">
      code_changed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.configure_settings" class="md-nav__link">
    <span class="md-ellipsis">
      configure_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.highlight_code" class="md-nav__link">
    <span class="md-ellipsis">
      highlight_code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.open_file" class="md-nav__link">
    <span class="md-ellipsis">
      open_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.pick_color" class="md-nav__link">
    <span class="md-ellipsis">
      pick_color
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.prepare_ui" class="md-nav__link">
    <span class="md-ellipsis">
      prepare_ui
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.read_input" class="md-nav__link">
    <span class="md-ellipsis">
      read_input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.render" class="md-nav__link">
    <span class="md-ellipsis">
      render
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.save_file" class="md-nav__link">
    <span class="md-ellipsis">
      save_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.setup_pygments" class="md-nav__link">
    <span class="md-ellipsis">
      setup_pygments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.toggle_axes" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_axes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadSolution.toggle_grid" class="md-nav__link">
    <span class="md-ellipsis">
      toggle_grid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadWebServer" class="md-nav__link">
    <span class="md-ellipsis">
      NiceScadWebServer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NiceScadWebServer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nicescad.webserver.NiceScadWebServer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="nicescad-api-documentation">nicescad API Documentation</h1>


<div class="doc doc-object doc-module">



<a id="nicescad"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="nicescad.axes_helper" class="doc doc-heading">
            <code>axes_helper</code>


</h2>

    <div class="doc doc-contents ">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.axes_helper.AxesHelper" class="doc doc-heading">
            <code>AxesHelper</code>


</h3>


    <div class="doc doc-contents ">


      <p>A Python class for creating a 3D helper for visualizing the axes in a scene.
This class is designed to be used with the <code>nicegui</code> library (https://pypi.org/project/nicegui/)
for creating 3D scenes. It creates line objects for the x, y, and z axes,
each with a distinct color, and provides methods for changing these colors and toggling their visibility.</p>
<p>The original JavaScript code, which this Python code is based on, can be found at:
https://raw.githubusercontent.com/mrdoob/three.js/master/src/helpers/AxesHelper.js
The JavaScript code was refactored into this Python version by OpenAI's ChatGPT.</p>
<p>For the refactoring, following prompts were given:
1. Refactor a JavaScript class for handling ThreeJS scenes into a Python class using the <code>nicegui</code> library.
2. The class should allow to hide/show axes.
3. Usage of <code>nicegui</code> library's API for the colors.
4. Include Google docstrings and type hints to the code.
5. The scene should be a constructor parameter to be remembered.
6. The Axes should be named x, y and z. The name attribute should be assigned after the line object creation.
7. The <code>set_colors</code> method should be called in the constructor.
8. Use <code>with self.scene as scene</code> when drawing the lines.
9. The class should provide a method to toggle the visibility of axes.
10. The default size of the axes to be drawn should be 10.0.
11. Color information should be persisted when toggling the axes.
12. Use a dictionary to store colors by axes names.</p>
<p>According to nicegui's documentation (https://nicegui.io/documentation/scene), the 'scene.line()' function is used to
create lines, here is an example:
    scene.line([-4, 0, 0], [-4, 2, 0]).material('#ff0000')
To remove elements from the scene, one uses 'scene.remove()' function:
    scene.remove(element)
where element is either the element instance or its ID.</p>
<p>Date: 2023-07-24
@author: Refactored into Python by OpenAI's ChatGPT</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="nicescad.axes_helper.AxesHelper.size">size</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the axes to be drawn.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="nicescad.axes_helper.AxesHelper.scene">scene</span></code></td>
            <td>
                  <code><span title="ui.scene">scene</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scene where the axes will be drawn.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="usage" open>
  <summary>Usage</summary>
  <p>scene = ui.scene().classes('w-full h-64')
axes_helper = AxesHelper(scene, size=10.0)
axes_helper.set_colors(x_axis_color='#FF0000', y_axis_color='#00FF00', z_axis_color='#0000FF')  # set colors for x, y, and z axes
axes_helper.toggle_axes()  # toggle visibility of the axes</p>
</details>
              <details class="quote">
                <summary>Source code in <code>nicescad/axes_helper.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AxesHelper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Python class for creating a 3D helper for visualizing the axes in a scene.</span>
<span class="sd">    This class is designed to be used with the `nicegui` library (https://pypi.org/project/nicegui/)</span>
<span class="sd">    for creating 3D scenes. It creates line objects for the x, y, and z axes,</span>
<span class="sd">    each with a distinct color, and provides methods for changing these colors and toggling their visibility.</span>

<span class="sd">    The original JavaScript code, which this Python code is based on, can be found at:</span>
<span class="sd">    https://raw.githubusercontent.com/mrdoob/three.js/master/src/helpers/AxesHelper.js</span>
<span class="sd">    The JavaScript code was refactored into this Python version by OpenAI&#39;s ChatGPT.</span>

<span class="sd">    For the refactoring, following prompts were given:</span>
<span class="sd">    1. Refactor a JavaScript class for handling ThreeJS scenes into a Python class using the `nicegui` library.</span>
<span class="sd">    2. The class should allow to hide/show axes.</span>
<span class="sd">    3. Usage of `nicegui` library&#39;s API for the colors.</span>
<span class="sd">    4. Include Google docstrings and type hints to the code.</span>
<span class="sd">    5. The scene should be a constructor parameter to be remembered.</span>
<span class="sd">    6. The Axes should be named x, y and z. The name attribute should be assigned after the line object creation.</span>
<span class="sd">    7. The `set_colors` method should be called in the constructor.</span>
<span class="sd">    8. Use `with self.scene as scene` when drawing the lines.</span>
<span class="sd">    9. The class should provide a method to toggle the visibility of axes.</span>
<span class="sd">    10. The default size of the axes to be drawn should be 10.0.</span>
<span class="sd">    11. Color information should be persisted when toggling the axes.</span>
<span class="sd">    12. Use a dictionary to store colors by axes names.</span>

<span class="sd">    According to nicegui&#39;s documentation (https://nicegui.io/documentation/scene), the &#39;scene.line()&#39; function is used to</span>
<span class="sd">    create lines, here is an example:</span>
<span class="sd">        scene.line([-4, 0, 0], [-4, 2, 0]).material(&#39;#ff0000&#39;)</span>
<span class="sd">    To remove elements from the scene, one uses &#39;scene.remove()&#39; function:</span>
<span class="sd">        scene.remove(element)</span>
<span class="sd">    where element is either the element instance or its ID.</span>

<span class="sd">    Date: 2023-07-24</span>
<span class="sd">    @author: Refactored into Python by OpenAI&#39;s ChatGPT</span>

<span class="sd">    Attributes:</span>
<span class="sd">        size (float): The size of the axes to be drawn.</span>
<span class="sd">        scene (ui.scene): The scene where the axes will be drawn.</span>

<span class="sd">    Usage:</span>
<span class="sd">        scene = ui.scene().classes(&#39;w-full h-64&#39;)</span>
<span class="sd">        axes_helper = AxesHelper(scene, size=10.0)</span>
<span class="sd">        axes_helper.set_colors(x_axis_color=&#39;#FF0000&#39;, y_axis_color=&#39;#00FF00&#39;, z_axis_color=&#39;#0000FF&#39;)  # set colors for x, y, and z axes</span>
<span class="sd">        axes_helper.toggle_axes()  # toggle visibility of the axes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">:</span> <span class="s2">&quot;ui.scene&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The constructor for AxesHelper class.</span>

<span class="sd">        Args:</span>
<span class="sd">            scene (ui.scene): The scene where the axes will be drawn.</span>
<span class="sd">            size (float): The size of the axes to be drawn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axis_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;#00FF00&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_axes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_colors</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">x_axis_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">,</span>
        <span class="n">y_axis_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#00FF00&quot;</span><span class="p">,</span>
        <span class="n">z_axis_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A method to set colors of the axes.</span>

<span class="sd">        Args:</span>
<span class="sd">            x_axis_color (str): Color of the x-axis.</span>
<span class="sd">            y_axis_color (str): Color of the y-axis.</span>
<span class="sd">            z_axis_color (str): Color of the z-axis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_axis_color</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_axis_color</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="n">z_axis_color</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">line</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_names</span><span class="p">[</span><span class="n">idx</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">toggle_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A method to toggle the visibility of the axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span><span class="p">:</span>
            <span class="c1"># Axes are currently visible, so remove them</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Axes are currently not visible, so add them</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span><span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.axes_helper.AxesHelper.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>The constructor for AxesHelper class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>scene</code></td>
            <td>
                  <code><span title="ui.scene">scene</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scene where the axes will be drawn.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>size</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the axes to be drawn.</p>
              </div>
            </td>
            <td>
                  <code>10.0</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/axes_helper.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">:</span> <span class="s2">&quot;ui.scene&quot;</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The constructor for AxesHelper class.</span>

<span class="sd">    Args:</span>
<span class="sd">        scene (ui.scene): The scene where the axes will be drawn.</span>
<span class="sd">        size (float): The size of the axes to be drawn.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">axis_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;#00FF00&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggle_axes</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.axes_helper.AxesHelper.set_colors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_colors</span><span class="p">(</span><span class="n">x_axis_color</span><span class="o">=</span><span class="s1">&#39;#FF0000&#39;</span><span class="p">,</span> <span class="n">y_axis_color</span><span class="o">=</span><span class="s1">&#39;#00FF00&#39;</span><span class="p">,</span> <span class="n">z_axis_color</span><span class="o">=</span><span class="s1">&#39;#0000FF&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>A method to set colors of the axes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>x_axis_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Color of the x-axis.</p>
              </div>
            </td>
            <td>
                  <code>&#39;#FF0000&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>y_axis_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Color of the y-axis.</p>
              </div>
            </td>
            <td>
                  <code>&#39;#00FF00&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>z_axis_color</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Color of the z-axis.</p>
              </div>
            </td>
            <td>
                  <code>&#39;#0000FF&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/axes_helper.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_colors</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x_axis_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#FF0000&quot;</span><span class="p">,</span>
    <span class="n">y_axis_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#00FF00&quot;</span><span class="p">,</span>
    <span class="n">z_axis_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;#0000FF&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A method to set colors of the axes.</span>

<span class="sd">    Args:</span>
<span class="sd">        x_axis_color (str): Color of the x-axis.</span>
<span class="sd">        y_axis_color (str): Color of the y-axis.</span>
<span class="sd">        z_axis_color (str): Color of the z-axis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_axis_color</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_axis_color</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="n">z_axis_color</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
        <span class="n">line</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_names</span><span class="p">[</span><span class="n">idx</span><span class="p">]])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.axes_helper.AxesHelper.toggle_axes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_axes</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>A method to toggle the visibility of the axes.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/axes_helper.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">toggle_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A method to toggle the visibility of the axes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span><span class="p">:</span>
        <span class="c1"># Axes are currently visible, so remove them</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Axes are currently not visible, so add them</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">line</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">line</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_by_name</span><span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_visible</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.blockscad_converter" class="doc doc-heading">
            <code>blockscad_converter</code>


</h2>

    <div class="doc doc-contents ">

      <p>A class to convert BlockSCAD XML files to SCAD files using the OpenAI language model API.</p>
<p>BlockSCAD Editor: https://www.blockscad3d.com/editor/
OpenSCAD: https://openscad.org/
NiceSCAD: http://nicescad.bitplan.com/
Relevant Issue: http://nicescad.bitplan.com/issue/23</p>
<p>Author: OpenAI ChatGPT
Date: July 25, 2023</p>
<p>The code was created by the OpenAI ChatGPT model in response to the following prompts:
- "Create a class named 'BlockscadConverter' that converts BlockSCAD XML files to SCAD files."
- "The xml_path is given in the constructor."
- "The class should have a method named <code>convert_to_scad</code> that outputs a path to the SCAD file."
- "Use the write method of a file object to output the SCAD file."
- "Include Google docstrings and type hints to the code."
- "Include comments that explain which prompts created the code. This helps other LLMs understand how to reproduce the same results."
- "Add links to the BlockSCAD editor (https://www.blockscad3d.com/editor/), OpenSCAD (https://openscad.org/), and the target platform (NiceSCAD, http://nicescad.bitplan.com/)."
- "Include the link to the relevant issue: 'support reading and converting blockscad files #23' on http://nicescad.bitplan.com/issue/23"
- "Add yourself (OpenAI ChatGPT) as the author and include the date"
- "keep the prompt list in the comments to be able to reproduce the results."
- "If the OpenAI API key is not available in the environment variables, look for it in a JSON file at <code>~/.openai/openai_api_key.json</code>."
- "If the OpenAI API key is not found, throw an exception."</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.blockscad_converter.BlockscadConverter" class="doc doc-heading">
            <code>BlockscadConverter</code>


</h3>


    <div class="doc doc-contents ">


      <h5 id="nicescad.blockscad_converter.BlockscadConverter--attributes">Attributes</h5>
<p>xml_path : str
    path to the input BlockSCAD XML file</p>
<h5 id="nicescad.blockscad_converter.BlockscadConverter--methods">Methods</h5>
<p>convert_to_scad(scad_path: str) -&gt; Union[str, None]
    Converts the BlockSCAD XML file to a SCAD file and returns the SCAD file path.</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/blockscad_converter.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BlockscadConverter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    xml_path : str</span>
<span class="sd">        path to the input BlockSCAD XML file</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    convert_to_scad(scad_path: str) -&gt; Union[str, None]</span>
<span class="sd">        Converts the BlockSCAD XML file to a SCAD file and returns the SCAD file path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xml_path : str</span>
<span class="sd">            path to the input BlockSCAD XML file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span> <span class="o">=</span> <span class="n">xml_path</span>

    <span class="k">def</span> <span class="nf">convert_to_scad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scad_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the BlockSCAD XML file to a SCAD file using the OpenAI language model API.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        scad_path : str</span>
<span class="sd">            path to the output SCAD file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[str, None]</span>
<span class="sd">            path to the output SCAD file if conversion is successful, None otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Load the API key from the environment or a JSON file</span>
        <span class="n">openai_api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>
        <span class="n">json_file</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.openai&quot;</span> <span class="o">/</span> <span class="s2">&quot;openai_api_key.json&quot;</span>

        <span class="k">if</span> <span class="n">openai_api_key</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">json_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">openai_api_key</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">openai_api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;No OpenAI API key found. Please set the &#39;OPENAI_API_KEY&#39; environment variable or store it in `~/.openai/openai_api_key.json`.&quot;</span>
            <span class="p">)</span>

        <span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">openai_api_key</span>

        <span class="c1"># Read the XML file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">xml_content</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="c1"># Check if the XML content is a BlockSCAD XML</span>
        <span class="k">if</span> <span class="s1">&#39;&lt;xml xmlns=&quot;https://blockscad3d.com&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">xml_content</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;The file at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span><span class="si">}</span><span class="s2"> is not a valid BlockSCAD XML file.&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Use the API to convert the XML to SCAD</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;text-davinci-002&quot;</span><span class="p">,</span>
            <span class="n">prompt</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Convert the following BlockSCAD XML to OpenSCAD and make sure to add a preamble comment (verbatim):</span>
<span class="s2">// OpenSCAD </span>
<span class="s2">// converted from BlockSCAD XML by nicescad&#39;s blockscad converter</span>
<span class="s2">// according to </span>
<span class="s2">// https://github.com/WolfgangFahl/nicescad/issues/23</span>
<span class="s2">// support reading and converting blockscad files #23</span>
<span class="s2">//</span>
<span class="s2">make sure to convert as direct as possible e.g. </span>
<span class="s2">translate,rotate,cylinder,sphere,cube,color which are available in OpenScad should be           </span>
<span class="s2">used as such. </span>
<span class="s2">Use all parameters e.g. prefer cube(10,10,10,center=true) to cube(10) when the parameters are available in</span>
<span class="s2">the original xml file.</span>
<span class="s2">&lt;field name=&quot;CENTERDROPDOWN&quot;&gt;false&lt;/field&gt; e.g. leads to center=false</span>
<span class="s2">Add the original color command using a color name when applicable e.g. color(&quot;green&quot;);.</span>
<span class="s2">Try high reproduceability by not making any assumptions and keeping the structure intact. So do not add an initial translate. </span>

<span class="s2">Do not add extra empty comments.</span>
<span class="s2">Avoid any empty lines - really - never add whitespace that harms getting always the same result.</span>
<span class="s2">Always use // line comments never /* </span>
<span class="s2">Always indent with two spaces.</span>
<span class="s2">Make sure commands end with a semicolon.</span>

<span class="s2">Here is the BlockSCAD XML:</span><span class="se">\n</span><span class="si">{</span><span class="n">xml_content</span><span class="si">}</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">scad_content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># A very basic check to see if the SCAD content seems okay</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">scad_content</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;// OpenSCAD&quot;</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;The conversion of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span><span class="si">}</span><span class="s2"> failed - the // OpenSCAD comment is missing in:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">scad_content</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Write the SCAD code to the output file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">scad_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">scad_file</span><span class="p">:</span>
            <span class="n">scad_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">scad_content</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">scad_path</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.blockscad_converter.BlockscadConverter.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">xml_path</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <h6 id="nicescad.blockscad_converter.BlockscadConverter.__init__--parameters">Parameters</h6>
<p>xml_path : str
    path to the input BlockSCAD XML file</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/blockscad_converter.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    xml_path : str</span>
<span class="sd">        path to the input BlockSCAD XML file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span> <span class="o">=</span> <span class="n">xml_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.blockscad_converter.BlockscadConverter.convert_to_scad" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_to_scad</span><span class="p">(</span><span class="n">scad_path</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Converts the BlockSCAD XML file to a SCAD file using the OpenAI language model API.</p>
<h6 id="nicescad.blockscad_converter.BlockscadConverter.convert_to_scad--parameters">Parameters</h6>
<p>scad_path : str
    path to the output SCAD file</p>
<h6 id="nicescad.blockscad_converter.BlockscadConverter.convert_to_scad--returns">Returns</h6>
<p>Union[str, None]
    path to the output SCAD file if conversion is successful, None otherwise</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/blockscad_converter.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">convert_to_scad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scad_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the BlockSCAD XML file to a SCAD file using the OpenAI language model API.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        scad_path : str</span>
<span class="sd">            path to the output SCAD file</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[str, None]</span>
<span class="sd">            path to the output SCAD file if conversion is successful, None otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Load the API key from the environment or a JSON file</span>
        <span class="n">openai_api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>
        <span class="n">json_file</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.openai&quot;</span> <span class="o">/</span> <span class="s2">&quot;openai_api_key.json&quot;</span>

        <span class="k">if</span> <span class="n">openai_api_key</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">json_file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">openai_api_key</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">openai_api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;No OpenAI API key found. Please set the &#39;OPENAI_API_KEY&#39; environment variable or store it in `~/.openai/openai_api_key.json`.&quot;</span>
            <span class="p">)</span>

        <span class="n">openai</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">openai_api_key</span>

        <span class="c1"># Read the XML file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">xml_content</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="c1"># Check if the XML content is a BlockSCAD XML</span>
        <span class="k">if</span> <span class="s1">&#39;&lt;xml xmlns=&quot;https://blockscad3d.com&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">xml_content</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;The file at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span><span class="si">}</span><span class="s2"> is not a valid BlockSCAD XML file.&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Use the API to convert the XML to SCAD</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">Completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;text-davinci-002&quot;</span><span class="p">,</span>
            <span class="n">prompt</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;Convert the following BlockSCAD XML to OpenSCAD and make sure to add a preamble comment (verbatim):</span>
<span class="s2">// OpenSCAD </span>
<span class="s2">// converted from BlockSCAD XML by nicescad&#39;s blockscad converter</span>
<span class="s2">// according to </span>
<span class="s2">// https://github.com/WolfgangFahl/nicescad/issues/23</span>
<span class="s2">// support reading and converting blockscad files #23</span>
<span class="s2">//</span>
<span class="s2">make sure to convert as direct as possible e.g. </span>
<span class="s2">translate,rotate,cylinder,sphere,cube,color which are available in OpenScad should be           </span>
<span class="s2">used as such. </span>
<span class="s2">Use all parameters e.g. prefer cube(10,10,10,center=true) to cube(10) when the parameters are available in</span>
<span class="s2">the original xml file.</span>
<span class="s2">&lt;field name=&quot;CENTERDROPDOWN&quot;&gt;false&lt;/field&gt; e.g. leads to center=false</span>
<span class="s2">Add the original color command using a color name when applicable e.g. color(&quot;green&quot;);.</span>
<span class="s2">Try high reproduceability by not making any assumptions and keeping the structure intact. So do not add an initial translate. </span>

<span class="s2">Do not add extra empty comments.</span>
<span class="s2">Avoid any empty lines - really - never add whitespace that harms getting always the same result.</span>
<span class="s2">Always use // line comments never /* </span>
<span class="s2">Always indent with two spaces.</span>
<span class="s2">Make sure commands end with a semicolon.</span>

<span class="s2">Here is the BlockSCAD XML:</span><span class="se">\n</span><span class="si">{</span><span class="n">xml_content</span><span class="si">}</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">scad_content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># A very basic check to see if the SCAD content seems okay</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">scad_content</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;// OpenSCAD&quot;</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;The conversion of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xml_path</span><span class="si">}</span><span class="s2"> failed - the // OpenSCAD comment is missing in:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">scad_content</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Write the SCAD code to the output file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">scad_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">scad_file</span><span class="p">:</span>
            <span class="n">scad_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">scad_content</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">scad_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.nicescad_cmd" class="doc doc-heading">
            <code>nicescad_cmd</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-07-19</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.nicescad_cmd.NiceScadCmd" class="doc doc-heading">
            <code>NiceScadCmd</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ngwidgets.cmd.WebserverCmd">WebserverCmd</span></code></p>


      <p>command line handling for nicescad</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/nicescad_cmd.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NiceScadCmd</span><span class="p">(</span><span class="n">WebserverCmd</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    command line handling for nicescad</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
        <span class="n">WebserverCmd</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">NiceScadWebServer</span><span class="p">,</span> <span class="n">DEBUG</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getArgParser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArgumentParser</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        override the default argparser call</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">getArgParser</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show verbose output [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-rp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--root_path&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to pdf files [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">parser</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.nicescad_cmd.NiceScadCmd.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>constructor</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/nicescad_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
    <span class="n">WebserverCmd</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">NiceScadWebServer</span><span class="p">,</span> <span class="n">DEBUG</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.nicescad_cmd.NiceScadCmd.getArgParser" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getArgParser</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>override the default argparser call</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/nicescad_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getArgParser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArgumentParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    override the default argparser call</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">getArgParser</span><span class="p">(</span><span class="n">description</span><span class="p">,</span> <span class="n">version_msg</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show verbose output [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-rp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--root_path&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to pdf files [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="nicescad.nicescad_cmd.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>main call</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/nicescad_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    main call</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="n">NiceScadCmd</span><span class="p">()</span>
    <span class="n">exit_code</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">cmd_main</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">exit_code</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.openscad" class="doc doc-heading">
            <code>openscad</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-07-19</p>
<p>@author: wf</p>
<p>This module contains the class OpenScad, a wrapper for OpenScad.</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.openscad.OpenSCADLexer" class="doc doc-heading">
            <code>OpenSCADLexer</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pygments.lexer.RegexLexer">RegexLexer</span></code></p>


      <p>Lexer for OpenSCAD, a language for creating solid 3D CAD models.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="nicescad.openscad.OpenSCADLexer.name">name</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the lexer.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="nicescad.openscad.OpenSCADLexer.aliases">aliases</span></code></td>
            <td>
                  <code>list of str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of strings that can be used as aliases for the lexer.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="nicescad.openscad.OpenSCADLexer.filenames">filenames</span></code></td>
            <td>
                  <code>list of str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of strings that define filename patterns that match this lexer.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>nicescad/openscad.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">OpenSCADLexer</span><span class="p">(</span><span class="n">RegexLexer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Lexer for OpenSCAD, a language for creating solid 3D CAD models.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The name of the lexer.</span>
<span class="sd">        aliases (list of str): A list of strings that can be used as aliases for the lexer.</span>
<span class="sd">        filenames (list of str): A list of strings that define filename patterns that match this lexer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;OpenSCAD&quot;</span>
    <span class="n">aliases</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;openscad&quot;</span><span class="p">]</span>
    <span class="n">filenames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;*.scad&quot;</span><span class="p">]</span>

    <span class="n">tokens</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;root&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">Text</span><span class="o">.</span><span class="n">Whitespace</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;//.*?$&quot;</span><span class="p">,</span> <span class="n">Comment</span><span class="o">.</span><span class="n">Single</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;/\*.*?\*/&quot;</span><span class="p">,</span> <span class="n">Comment</span><span class="o">.</span><span class="n">Multiline</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[a-z_][\w]*&quot;</span><span class="p">,</span> <span class="n">Name</span><span class="o">.</span><span class="n">Variable</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">Number</span><span class="o">.</span><span class="n">Integer</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\+\+|--&quot;</span><span class="p">,</span> <span class="n">Operator</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[=+\-*/%&amp;|^&lt;&gt;!]=?&quot;</span><span class="p">,</span> <span class="n">Operator</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\[\]</span><span class="si">{}</span><span class="s2">();,.]&quot;</span><span class="p">,</span> <span class="n">Punctuation</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&quot;(</span><span class="se">\\\\</span><span class="s1">|</span><span class="se">\\</span><span class="s1">&quot;|[^&quot;])*&quot;&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\b(module|if|else|for|let|echo)\b&quot;</span><span class="p">,</span> <span class="n">Keyword</span><span class="p">),</span>
            <span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\b(true|false|undef)\b&quot;</span><span class="p">,</span> <span class="n">Keyword</span><span class="o">.</span><span class="n">Constant</span><span class="p">),</span>
            <span class="p">(</span>
                <span class="sa">r</span><span class="s2">&quot;\b(cube|sphere|cylinder|polyhedron|square|circle|polygon|import|scale|resize|color|offset|minkowski|hull|render|surface|rotate|translate|mirror|multmatrix|projection|rotate_extrude|linear_extrude)\b&quot;</span><span class="p">,</span>
                <span class="n">Name</span><span class="o">.</span><span class="n">Builtin</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">],</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="nicescad.openscad.OpenScad" class="doc doc-heading">
            <code>OpenScad</code>


</h3>


    <div class="doc doc-contents ">


      <p>A wrapper for OpenScad (https://openscad.org/).</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/openscad.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">OpenScad</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A wrapper for OpenScad (https://openscad.org/).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scad_prepend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the OpenScad object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scad_prepend</span> <span class="o">=</span> <span class="n">scad_prepend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;OPENSCAD_EXEC&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENSCAD_EXEC&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;OPENSCAD_TMP_DIR&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENSCAD_TMP_DIR&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;openscad_exec&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;openscad_exec&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_try_detect_openscad_exec</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;openscad exec not found!&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">highlight_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Highlights the provided OpenSCAD code and returns the highlighted code in HTML format.</span>

<span class="sd">        Args:</span>
<span class="sd">            code (str): The OpenSCAD code to highlight.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The input OpenSCAD code, highlighted and formatted as an HTML string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">OpenSCADLexer</span><span class="p">(),</span> <span class="n">HtmlFormatter</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">_try_executable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">executable_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the specified path is a file. If it is, sets it as the OpenScad executable.</span>

<span class="sd">        Args:</span>
<span class="sd">            executable_path (str): The path to the executable file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">executable_path</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="n">executable_path</span>

    <span class="k">def</span> <span class="nf">_try_detect_openscad_exec</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Tries to find the OpenScad executable on the system.</span>

<span class="sd">        References:</span>
<span class="sd">            https://github.com/nickc92/ViewSCAD/blob/d4597ff6870316dfaafa4f9ecc8ef62773081c61/viewscad/renderer.py#L206C5-L222C1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">platfm</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">platfm</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_try_executable</span><span class="p">(</span><span class="s2">&quot;/usr/bin/openscad&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_try_executable</span><span class="p">(</span><span class="s2">&quot;/usr/local/bin/openscad&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">platfm</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_try_executable</span><span class="p">(</span><span class="s2">&quot;/Applications/OpenSCAD.app/Contents/MacOS/OpenSCAD&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">platfm</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_try_executable</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Programfiles(x86)&quot;</span><span class="p">,</span> <span class="s2">&quot;C:&quot;</span><span class="p">),</span> <span class="s2">&quot;OpenSCAD</span><span class="se">\\</span><span class="s2">openscad.exe&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_try_executable</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Programfiles&quot;</span><span class="p">,</span> <span class="s2">&quot;C:&quot;</span><span class="p">),</span> <span class="s2">&quot;OpenSCAD</span><span class="se">\\</span><span class="s2">openscad.exe&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_to_tmp_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">openscad_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">do_prepend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Writes an OpenSCAD string to a temporary file.</span>

<span class="sd">        The `scad_prepend` string is prepended to the OpenSCAD code before writing,</span>
<span class="sd">        unless the OpenSCAD code contains the string &#39;//!OpenSCAD&#39;, or `do_prepend`</span>
<span class="sd">        is set to `False`. In these cases, only the OpenSCAD code is written to the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            openscad_str (str): The OpenSCAD code.</span>
<span class="sd">            do_prepend (bool, optional): If `True`, the `scad_prepend` string is</span>
<span class="sd">                                          prepended to the OpenSCAD code. Defaults to `True`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The path to the temporary file where the OpenSCAD code (and</span>
<span class="sd">                 possibly the `scad_prepend` string) was written.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scad_tmp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">,</span> <span class="s2">&quot;tmp.scad&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">scad_tmp_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">of</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">do_prepend</span> <span class="ow">and</span> <span class="s2">&quot;//!OpenSCAD&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">openscad_str</span><span class="p">:</span>
                <span class="n">of</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scad_prepend</span><span class="p">)</span>
            <span class="n">of</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scad_tmp_file</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">render_to_file_async</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">openscad_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Subprocess</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously renders an OpenSCAD string to a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            openscad_str (str): The OpenSCAD code.</span>
<span class="sd">            stl_path(str): The path to the output file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Subprocess: the openscad execution result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scad_tmp_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_tmp_file</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">)</span>

        <span class="c1"># now run openscad to generate stl:</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saved_umask</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="mo">0o077</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Subprocess</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saved_umask</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup_tmp_file</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">stl_path</span> <span class="o">=</span> <span class="n">stl_path</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">cleanup_tmp_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cleanup temporary files after subprocess execution.</span>

<span class="sd">        Args:</span>
<span class="sd">            result (Subprocess): The result of the subprocess execution.</span>
<span class="sd">            scad_tmp_file (str): The path to the temporary file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">scad_tmp_file</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">scad_tmp_file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">scad_tmp_file</span> <span class="o">=</span> <span class="n">scad_tmp_file</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">openscad_str_to_file</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">openscad_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Subprocess</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the OpenSCAD code to a file.</span>

<span class="sd">        Args:</span>
<span class="sd">            openscad_str (str): The OpenSCAD code.</span>
<span class="sd">            stl_path(str): the path to the stl file</span>

<span class="sd">        Returns:</span>
<span class="sd">            Subprocess: The result of the subprocess run, encapsulated in a Subprocess object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_file_async</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.openscad.OpenScad.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">scad_prepend</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Initializes the OpenScad object.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/openscad.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scad_prepend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the OpenScad object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scad_prepend</span> <span class="o">=</span> <span class="n">scad_prepend</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;OPENSCAD_EXEC&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENSCAD_EXEC&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;OPENSCAD_TMP_DIR&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENSCAD_TMP_DIR&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_tmp_dir</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;openscad_exec&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;openscad_exec&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_try_detect_openscad_exec</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;openscad exec not found!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.openscad.OpenScad.cleanup_tmp_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cleanup_tmp_file</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Cleanup temporary files after subprocess execution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>result</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="nicescad.process.Subprocess" href="#nicescad.process.Subprocess">Subprocess</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the subprocess execution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>scad_tmp_file</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the temporary file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/openscad.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cleanup_tmp_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleanup temporary files after subprocess execution.</span>

<span class="sd">    Args:</span>
<span class="sd">        result (Subprocess): The result of the subprocess execution.</span>
<span class="sd">        scad_tmp_file (str): The path to the temporary file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">scad_tmp_file</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">scad_tmp_file</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">scad_tmp_file</span> <span class="o">=</span> <span class="n">scad_tmp_file</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.openscad.OpenScad.highlight_code" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">highlight_code</span><span class="p">(</span><span class="n">code</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Highlights the provided OpenSCAD code and returns the highlighted code in HTML format.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>code</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OpenSCAD code to highlight.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input OpenSCAD code, highlighted and formatted as an HTML string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/openscad.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">highlight_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Highlights the provided OpenSCAD code and returns the highlighted code in HTML format.</span>

<span class="sd">    Args:</span>
<span class="sd">        code (str): The OpenSCAD code to highlight.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The input OpenSCAD code, highlighted and formatted as an HTML string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">OpenSCADLexer</span><span class="p">(),</span> <span class="n">HtmlFormatter</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">html</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.openscad.OpenScad.openscad_str_to_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">openscad_str_to_file</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Renders the OpenSCAD code to a file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>openscad_str</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OpenSCAD code.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stl_path(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to the stl file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Subprocess</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="nicescad.process.Subprocess" href="#nicescad.process.Subprocess">Subprocess</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the subprocess run, encapsulated in a Subprocess object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/openscad.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">openscad_str_to_file</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">openscad_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Subprocess</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the OpenSCAD code to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        openscad_str (str): The OpenSCAD code.</span>
<span class="sd">        stl_path(str): the path to the stl file</span>

<span class="sd">    Returns:</span>
<span class="sd">        Subprocess: The result of the subprocess run, encapsulated in a Subprocess object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_file_async</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.openscad.OpenScad.render_to_file_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render_to_file_async</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Asynchronously renders an OpenSCAD string to a file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>openscad_str</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OpenSCAD code.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stl_path(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the output file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Subprocess</code></td>            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="nicescad.process.Subprocess" href="#nicescad.process.Subprocess">Subprocess</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the openscad execution result</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/openscad.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">render_to_file_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">openscad_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Subprocess</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously renders an OpenSCAD string to a file.</span>

<span class="sd">    Args:</span>
<span class="sd">        openscad_str (str): The OpenSCAD code.</span>
<span class="sd">        stl_path(str): The path to the output file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Subprocess: the openscad execution result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">scad_tmp_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_to_tmp_file</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">)</span>

    <span class="c1"># now run openscad to generate stl:</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">openscad_exec</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">stl_path</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">saved_umask</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="mo">0o077</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">Subprocess</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">umask</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saved_umask</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cleanup_tmp_file</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">scad_tmp_file</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">stl_path</span> <span class="o">=</span> <span class="n">stl_path</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.openscad.OpenScad.write_to_tmp_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">write_to_tmp_file</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">,</span> <span class="n">do_prepend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Writes an OpenSCAD string to a temporary file.</p>
<p>The <code>scad_prepend</code> string is prepended to the OpenSCAD code before writing,
unless the OpenSCAD code contains the string '//!OpenSCAD', or <code>do_prepend</code>
is set to <code>False</code>. In these cases, only the OpenSCAD code is written to the file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>openscad_str</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OpenSCAD code.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>do_prepend</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>True</code>, the <code>scad_prepend</code> string is
                          prepended to the OpenSCAD code. Defaults to <code>True</code>.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the temporary file where the OpenSCAD code (and
 possibly the <code>scad_prepend</code> string) was written.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/openscad.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">write_to_tmp_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">openscad_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">do_prepend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Writes an OpenSCAD string to a temporary file.</span>

<span class="sd">    The `scad_prepend` string is prepended to the OpenSCAD code before writing,</span>
<span class="sd">    unless the OpenSCAD code contains the string &#39;//!OpenSCAD&#39;, or `do_prepend`</span>
<span class="sd">    is set to `False`. In these cases, only the OpenSCAD code is written to the file.</span>

<span class="sd">    Args:</span>
<span class="sd">        openscad_str (str): The OpenSCAD code.</span>
<span class="sd">        do_prepend (bool, optional): If `True`, the `scad_prepend` string is</span>
<span class="sd">                                      prepended to the OpenSCAD code. Defaults to `True`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The path to the temporary file where the OpenSCAD code (and</span>
<span class="sd">             possibly the `scad_prepend` string) was written.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">scad_tmp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">,</span> <span class="s2">&quot;tmp.scad&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">scad_tmp_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">of</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">do_prepend</span> <span class="ow">and</span> <span class="s2">&quot;//!OpenSCAD&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">openscad_str</span><span class="p">:</span>
            <span class="n">of</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scad_prepend</span><span class="p">)</span>
        <span class="n">of</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">openscad_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">scad_tmp_file</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.process" class="doc doc-heading">
            <code>process</code>


</h2>

    <div class="doc doc-contents ">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.process.Subprocess" class="doc doc-heading">
            <code>Subprocess</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>A class representing a subprocess execution result.</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/process.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Subprocess</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class representing a subprocess execution result.&quot;&quot;&quot;</span>

    <span class="n">stdout</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">stderr</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">cmd</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">returncode</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">exception</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="s2">&quot;Subprocess&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously runs a command as a subprocess and returns the result as an instance of this class.</span>

<span class="sd">        Args:</span>
<span class="sd">            cmd (List[str]): The command to run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Subprocess: An instance of this class representing the result of the subprocess execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">proc</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_subprocess_exec</span><span class="p">(</span>
                <span class="o">*</span><span class="n">cmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
            <span class="p">)</span>

            <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="k">await</span> <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

            <span class="n">subprocess</span> <span class="o">=</span> <span class="n">Subprocess</span><span class="p">(</span>
                <span class="n">stdout</span><span class="o">=</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                <span class="n">stderr</span><span class="o">=</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                <span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="p">,</span>
                <span class="n">returncode</span><span class="o">=</span><span class="n">proc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">subprocess</span> <span class="o">=</span> <span class="n">Subprocess</span><span class="p">(</span>
                <span class="n">stdout</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">),</span> <span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="p">,</span> <span class="n">returncode</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">subprocess</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Subprocess&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Runs a command as a subprocess and returns the result as an instance of this class.</span>

<span class="sd">        Args:</span>
<span class="sd">            cmd (List[str]): The command to run.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Subprocess: An instance of this class representing the result of the subprocess execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subprocess</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Subprocess</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">subprocess</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.process.Subprocess.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Runs a command as a subprocess and returns the result as an instance of this class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>cmd</code></td>
            <td>
                  <code><span title="typing.List">List</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The command to run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Subprocess</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="nicescad.process.Subprocess" href="#nicescad.process.Subprocess">Subprocess</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of this class representing the result of the subprocess execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/process.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Subprocess&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Runs a command as a subprocess and returns the result as an instance of this class.</span>

<span class="sd">    Args:</span>
<span class="sd">        cmd (List[str]): The command to run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Subprocess: An instance of this class representing the result of the subprocess execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subprocess</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Subprocess</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">subprocess</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.process.Subprocess.run_async" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Asynchronously runs a command as a subprocess and returns the result as an instance of this class.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>cmd</code></td>
            <td>
                  <code><span title="typing.List">List</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The command to run.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Subprocess</code></td>            <td>
                  <code><span title="typing.Awaitable">Awaitable</span>[<a class="autorefs autorefs-internal" title="nicescad.process.Subprocess" href="#nicescad.process.Subprocess">Subprocess</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of this class representing the result of the subprocess execution.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/process.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">run_async</span><span class="p">(</span><span class="n">cmd</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Awaitable</span><span class="p">[</span><span class="s2">&quot;Subprocess&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously runs a command as a subprocess and returns the result as an instance of this class.</span>

<span class="sd">    Args:</span>
<span class="sd">        cmd (List[str]): The command to run.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Subprocess: An instance of this class representing the result of the subprocess execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">proc</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_subprocess_exec</span><span class="p">(</span>
            <span class="o">*</span><span class="n">cmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
        <span class="p">)</span>

        <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="k">await</span> <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

        <span class="n">subprocess</span> <span class="o">=</span> <span class="n">Subprocess</span><span class="p">(</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
            <span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="p">,</span>
            <span class="n">returncode</span><span class="o">=</span><span class="n">proc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">subprocess</span> <span class="o">=</span> <span class="n">Subprocess</span><span class="p">(</span>
            <span class="n">stdout</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">),</span> <span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="p">,</span> <span class="n">returncode</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="n">ex</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">subprocess</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.solidservice" class="doc doc-heading">
            <code>solidservice</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-07-30</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.solidservice.FastAPIServer" class="doc doc-heading">
            <code>FastAPIServer</code>


</h3>


    <div class="doc doc-contents ">


      <p>Class for FastAPI server.</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/solidservice.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">FastAPIServer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for FastAPI server.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/convert/&quot;</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/version/&quot;</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HTMLResponse</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">home</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoint to return the homepage with links.</span>

<span class="sd">        Returns:</span>
<span class="sd">        str -- HTML content</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &lt;html&gt;</span>
<span class="s2">            &lt;head&gt;</span>
<span class="s2">                &lt;title&gt;Nicescad solidpython converter service&lt;/title&gt;</span>
<span class="s2">            &lt;/head&gt;</span>
<span class="s2">            &lt;body&gt;</span>
<span class="s2">                &lt;h1&gt;Welcome to the nicescad solidpython to scad converter&lt;/h1&gt;</span>
<span class="s2">                &lt;ul&gt;</span>
<span class="s2">                    &lt;li&gt;&lt;a href=&quot;/version/&quot;&gt;Check the version of nicescad&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">                    &lt;li&gt;&lt;a href=&quot;https://github.com/WolfgangFahl/nicescad/issues/28&quot;&gt;nicescad GitHub issue&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">                &lt;/ul&gt;</span>
<span class="s2">            &lt;/body&gt;</span>
<span class="s2">        &lt;/html&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoint to return the version of the nicescad package.</span>

<span class="sd">        Returns:</span>
<span class="sd">        dict -- the version</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">nicescad</span><span class="o">.</span><span class="n">__version__</span><span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Endpoint to convert Python code to OpenSCAD code.</span>

<span class="sd">        Arguments:</span>
<span class="sd">        item: Item -- input Python code</span>

<span class="sd">        Returns:</span>
<span class="sd">        dict -- the OpenSCAD code</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">converter</span> <span class="o">=</span> <span class="n">SolidConverter</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">python_code</span><span class="p">)</span>
        <span class="n">openscad_code</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">convert_to_openscad</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;openscad_code&quot;</span><span class="p">:</span> <span class="n">openscad_code</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.solidservice.FastAPIServer.convert" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Endpoint to convert Python code to OpenSCAD code.</p>
<p>Arguments:
item: Item -- input Python code</p>
<p>Returns:
dict -- the OpenSCAD code</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/solidservice.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Endpoint to convert Python code to OpenSCAD code.</span>

<span class="sd">    Arguments:</span>
<span class="sd">    item: Item -- input Python code</span>

<span class="sd">    Returns:</span>
<span class="sd">    dict -- the OpenSCAD code</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">converter</span> <span class="o">=</span> <span class="n">SolidConverter</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">python_code</span><span class="p">)</span>
    <span class="n">openscad_code</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">convert_to_openscad</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;openscad_code&quot;</span><span class="p">:</span> <span class="n">openscad_code</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.solidservice.FastAPIServer.home" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">home</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Endpoint to return the homepage with links.</p>
<p>Returns:
str -- HTML content</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/solidservice.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Endpoint to return the homepage with links.</span>

<span class="sd">    Returns:</span>
<span class="sd">    str -- HTML content</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;html&gt;</span>
<span class="s2">        &lt;head&gt;</span>
<span class="s2">            &lt;title&gt;Nicescad solidpython converter service&lt;/title&gt;</span>
<span class="s2">        &lt;/head&gt;</span>
<span class="s2">        &lt;body&gt;</span>
<span class="s2">            &lt;h1&gt;Welcome to the nicescad solidpython to scad converter&lt;/h1&gt;</span>
<span class="s2">            &lt;ul&gt;</span>
<span class="s2">                &lt;li&gt;&lt;a href=&quot;/version/&quot;&gt;Check the version of nicescad&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">                &lt;li&gt;&lt;a href=&quot;https://github.com/WolfgangFahl/nicescad/issues/28&quot;&gt;nicescad GitHub issue&lt;/a&gt;&lt;/li&gt;</span>
<span class="s2">            &lt;/ul&gt;</span>
<span class="s2">        &lt;/body&gt;</span>
<span class="s2">    &lt;/html&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.solidservice.FastAPIServer.version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">version</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Endpoint to return the version of the nicescad package.</p>
<p>Returns:
dict -- the version</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/solidservice.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Endpoint to return the version of the nicescad package.</span>

<span class="sd">    Returns:</span>
<span class="sd">    dict -- the version</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">nicescad</span><span class="o">.</span><span class="n">__version__</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="nicescad.solidservice.SolidConverter" class="doc doc-heading">
            <code>SolidConverter</code>


</h3>


    <div class="doc doc-contents ">


      <p>Class for conversion of Python code to OpenSCAD code.</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/solidservice.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SolidConverter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for conversion of Python code to OpenSCAD code.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">python_code</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">python_code</span> <span class="o">=</span> <span class="n">python_code</span>

    <span class="k">def</span> <span class="nf">convert_to_openscad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to convert the input Python code into OpenSCAD code using SolidPython</span>

<span class="sd">        Returns:</span>
<span class="sd">        str -- OpenSCAD code</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">python_code</span><span class="p">)</span>
        <span class="n">openscad_code</span> <span class="o">=</span> <span class="n">scad_render</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">openscad_code</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.solidservice.SolidConverter.convert_to_openscad" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_to_openscad</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Function to convert the input Python code into OpenSCAD code using SolidPython</p>
<p>Returns:
str -- OpenSCAD code</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/solidservice.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_to_openscad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function to convert the input Python code into OpenSCAD code using SolidPython</span>

<span class="sd">    Returns:</span>
<span class="sd">    str -- OpenSCAD code</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">python_code</span><span class="p">)</span>
    <span class="n">openscad_code</span> <span class="o">=</span> <span class="n">scad_render</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">openscad_code</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.version" class="doc doc-heading">
            <code>version</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-06-19</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.version.Version" class="doc doc-heading">
            <code>Version</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>Version handling for nicescad</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/version.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Version</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Version handling for nicescad</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;nicescad&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">nicescad</span><span class="o">.</span><span class="n">__version__</span>
    <span class="n">date</span> <span class="o">=</span> <span class="s2">&quot;2023-07-19&quot;</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="s2">&quot;2024-09-09&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;nicescad brings OpenScad to the browser (again)&quot;</span>

    <span class="n">authors</span> <span class="o">=</span> <span class="s2">&quot;Wolfgang Fahl&quot;</span>

    <span class="n">doc_url</span> <span class="o">=</span> <span class="s2">&quot;https://wiki.bitplan.com/index.php/nicescad&quot;</span>
    <span class="n">chat_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/WolfgangFahl/nicescad/discussions&quot;</span>
    <span class="n">cm_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/WolfgangFahl/nicescad&quot;</span>

    <span class="n">license</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Copyright 2023-2024 contributors. All rights reserved.</span>

<span class="s2">  Licensed under the Apache License 2.0</span>
<span class="s2">  http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="s2">  Distributed on an &quot;AS IS&quot; basis without warranties</span>
<span class="s2">  or conditions of any kind, either express or implied.&quot;&quot;&quot;</span>
    <span class="n">longDescription</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span>
<span class="si">{</span><span class="n">description</span><span class="si">}</span>

<span class="s2">  Created by </span><span class="si">{</span><span class="n">authors</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> last updated </span><span class="si">{</span><span class="n">updated</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="nicescad.webserver" class="doc doc-heading">
            <code>webserver</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-06-19</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nicescad.webserver.NiceScadSolution" class="doc doc-heading">
            <code>NiceScadSolution</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ngwidgets.input_webserver.InputWebSolution">InputWebSolution</span></code></p>


      <p>the NiceScad solution</p>

              <details class="quote">
                <summary>Source code in <code>nicescad/webserver.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NiceScadSolution</span><span class="p">(</span><span class="n">InputWebSolution</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    the NiceScad solution</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webserver</span><span class="p">:</span> <span class="n">NiceScadWebServer</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the solution</span>

<span class="sd">        Calls the constructor of the base solution</span>
<span class="sd">        Args:</span>
<span class="sd">            webserver (NiceScadWebServer): The webserver instance associated with this context.</span>
<span class="sd">            client (Client): The client instance this context is associated with.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>  <span class="c1"># Call to the superclass constructor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;example.scad&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span> <span class="o">=</span> <span class="s2">&quot;result.stl&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span> <span class="o">=</span> <span class="s2">&quot;#57B6A9&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_trace</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span> <span class="o">=</span> <span class="n">webserver</span><span class="o">.</span><span class="n">oscad</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;// nicescad example</span>
<span class="s2">module example() {</span>
<span class="s2">  translate([0,0,15]) {</span>
<span class="s2">     cube(30,center=true);</span>
<span class="s2">     sphere(20);</span>
<span class="s2">  }</span>
<span class="s2">}</span>
<span class="s2">example();&quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_click_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Renders the OpenScad string and updates the 3D scene with the result.</span>

<span class="sd">        Args:</span>
<span class="sd">            click_args (object): The click event arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;rendering ...&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
            <span class="n">openscad_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">value</span>
            <span class="n">stl_path</span> <span class="o">=</span> <span class="n">stl_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span><span class="p">)</span>
            <span class="n">render_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">openscad_str_to_file</span><span class="p">(</span>
                <span class="n">openscad_str</span><span class="p">,</span> <span class="n">stl_path</span>
            <span class="p">)</span>
            <span class="c1"># show render result in log</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_view</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">render_result</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">render_result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;stl created ... loading into scene&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">stl</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/stl/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_trace</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">read_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reads the given input and handles any exceptions.</span>

<span class="sd">        Args:</span>
<span class="sd">            input_str (str): The input string representing a URL or local file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;reading </span><span class="si">{</span><span class="n">input_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_read_input</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_input</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_view</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves the current code to the last input file, if it was a local path.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="si">}</span><span class="s2"> saved&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No local file to save to&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">open_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Opens a Local filer picker dialog and reads the selected input file.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
            <span class="n">pick_list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">LocalFilePicker</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pick_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">input_file</span> <span class="o">=</span> <span class="n">pick_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>

    <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">setup_pygments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prepare pygments syntax highlighting by loading style</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pygments_css_file</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;web&quot;</span> <span class="o">/</span> <span class="s2">&quot;static&quot;</span> <span class="o">/</span> <span class="s2">&quot;css&quot;</span> <span class="o">/</span> <span class="s2">&quot;pygments.css&quot;</span>
        <span class="p">)</span>
        <span class="n">pygments_css</span> <span class="o">=</span> <span class="n">pygments_css_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">add_head_html</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;style&gt;</span><span class="si">{</span><span class="n">pygments_css</span><span class="si">}</span><span class="s2">&lt;/style&gt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">code_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        react on changed code</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">cargs</span><span class="o">.</span><span class="n">value</span>
        <span class="k">pass</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">highlight_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_cargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        highlight the code and show the html</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">code_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">highlight_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">code_html</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highlight_button</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_trace</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">pick_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ColorPickEventArguments</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously picks a color based on provided event arguments.</span>

<span class="sd">        This function changes the color of the &#39;color_picker_button&#39; and the &#39;stl_object&#39;</span>
<span class="sd">        according to the color specified in the event arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            e (ColorPickEventArguments): An object containing event-specific arguments.</span>
<span class="sd">                The &#39;color&#39; attribute of this object specifies the color to be applied.</span>

<span class="sd">        Note:</span>
<span class="sd">            If &#39;stl_object&#39; is None, the function will only change the color of &#39;color_picker_button&#39;.</span>
<span class="sd">            Otherwise, it changes the color of both &#39;color_picker_button&#39; and &#39;stl_object&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;background-color:</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">!important&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">color</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">toggle_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        toggle the axes of my scene</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes_button</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span> <span class="o">=</span> <span class="n">AxesHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span><span class="o">.</span><span class="n">toggle_axes</span><span class="p">()</span>
        <span class="k">pass</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">toggle_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ea</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        toogle the grid of my scene</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s2">&quot;grid&quot;</span><span class="p">]</span>
            <span class="n">grid_str</span> <span class="o">=</span> <span class="s2">&quot;off&quot;</span> <span class="k">if</span> <span class="n">grid</span> <span class="k">else</span> <span class="s2">&quot;on&quot;</span>
            <span class="n">grid_js</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span> <span class="k">if</span> <span class="n">grid</span> <span class="k">else</span> <span class="s2">&quot;true&quot;</span>
            <span class="c1"># try toggling grid</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;setting grid to </span><span class="si">{</span><span class="n">grid_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">grid</span>
            <span class="c1"># workaround according to https://github.com/zauberzeug/nicegui/discussions/1246</span>
            <span class="n">js_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;scene_c</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">.children.find(c =&gt; c.type === &quot;GridHelper&quot;).visible = </span><span class="si">{</span><span class="n">grid_js</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">await</span> <span class="n">ui</span><span class="o">.</span><span class="n">run_javascript</span><span class="p">(</span><span class="n">js_cmd</span><span class="p">,</span> <span class="n">respond</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s2">&quot;grid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="c1"># try toggling icon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_button</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handleExeption</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">prepare_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle the command line arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">InputWebSolution</span><span class="o">.</span><span class="n">prepare_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_pygments</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates the home page with a 3D viewer and a code editor.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setup_menu</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">column</span><span class="p">():</span>
            <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">splitter</span><span class="p">()</span> <span class="k">as</span> <span class="n">splitter</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">before</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grid_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                        <span class="s2">&quot;toggle grid&quot;</span><span class="p">,</span>
                        <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_grid</span><span class="p">,</span>
                        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;grid_off&quot;</span><span class="p">,</span>
                        <span class="n">toggle_icon</span><span class="o">=</span><span class="s2">&quot;grid_on&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">axes_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                        <span class="s2">&quot;toggle axes&quot;</span><span class="p">,</span>
                        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;polyline&quot;</span><span class="p">,</span>
                        <span class="n">toggle_icon</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span>
                        <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_axes</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;colorize&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span>
                    <span class="p">)</span>
                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">color_picker</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">color_picker</span><span class="p">(</span><span class="n">on_pick</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pick_color</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>

                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">scene</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">768</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">scene</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span>
                        <span class="n">scene</span><span class="o">.</span><span class="n">spot_light</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">intensity</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                    <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">after</span><span class="p">:</span>
                        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">):</span>
                            <span class="n">extensions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;scad&quot;</span><span class="p">:</span> <span class="s2">&quot;.scad&quot;</span><span class="p">,</span> <span class="s2">&quot;xml&quot;</span><span class="p">:</span> <span class="s2">&quot;.xml&quot;</span><span class="p">}</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">example_selector</span> <span class="o">=</span> <span class="n">FileSelector</span><span class="p">(</span>
                                <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">,</span>
                                <span class="n">extensions</span><span class="o">=</span><span class="n">extensions</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">input_input</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">input</span><span class="p">(</span>
                                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_changed</span>
                            <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;size=100&quot;</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">highlight_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;highlight&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">,</span>
                                <span class="n">toggle_icon</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">highlight_code</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                    <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;save&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;save&quot;</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save_file</span>
                                <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;reload&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_file</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                    <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;open&quot;</span><span class="p">,</span>
                                    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file_open&quot;</span><span class="p">,</span>
                                    <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_file</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;render&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;play_circle&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">link</span><span class="p">(</span>
                                <span class="s2">&quot;stl result&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;/stl/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">new_tab</span><span class="o">=</span><span class="kc">True</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span>
                                <span class="s2">&quot;dots&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;lg&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="n">ui</span><span class="o">.</span><span class="n">textarea</span><span class="p">(</span>
                                    <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">code_changed</span>
                                <span class="p">)</span>
                                <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;clearable&quot;</span><span class="p">)</span>
                                <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;rows=25&quot;</span><span class="p">)</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">log_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">max_lines</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full h-40&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_footer</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">configure_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates the settings page with a link to the project&#39;s GitHub page.&quot;&quot;&quot;</span>
        <span class="n">sp_input</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">textarea</span><span class="p">(</span><span class="s2">&quot;scad prepend&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">scad_prepend</span><span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span>
            <span class="s2">&quot;cols=80&quot;</span>
        <span class="p">)</span>
        <span class="n">sp_input</span><span class="o">.</span><span class="n">bind_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="p">,</span> <span class="s2">&quot;scad_prepend&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Initialize the solution</p>
<p>Calls the constructor of the base solution
Args:
    webserver (NiceScadWebServer): The webserver instance associated with this context.
    client (Client): The client instance this context is associated with.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webserver</span><span class="p">:</span> <span class="n">NiceScadWebServer</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">Client</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the solution</span>

<span class="sd">        Calls the constructor of the base solution</span>
<span class="sd">        Args:</span>
<span class="sd">            webserver (NiceScadWebServer): The webserver instance associated with this context.</span>
<span class="sd">            client (Client): The client instance this context is associated with.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">webserver</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>  <span class="c1"># Call to the superclass constructor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="s2">&quot;example.scad&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span> <span class="o">=</span> <span class="s2">&quot;result.stl&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span> <span class="o">=</span> <span class="s2">&quot;#57B6A9&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_trace</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span> <span class="o">=</span> <span class="n">webserver</span><span class="o">.</span><span class="n">oscad</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;// nicescad example</span>
<span class="s2">module example() {</span>
<span class="s2">  translate([0,0,15]) {</span>
<span class="s2">     cube(30,center=true);</span>
<span class="s2">     sphere(20);</span>
<span class="s2">  }</span>
<span class="s2">}</span>
<span class="s2">example();&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.code_changed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">code_changed</span><span class="p">(</span><span class="n">cargs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>react on changed code</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">code_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    react on changed code</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">cargs</span><span class="o">.</span><span class="n">value</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.configure_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">configure_settings</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Generates the settings page with a link to the project's GitHub page.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">configure_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates the settings page with a link to the project&#39;s GitHub page.&quot;&quot;&quot;</span>
    <span class="n">sp_input</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">textarea</span><span class="p">(</span><span class="s2">&quot;scad prepend&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">scad_prepend</span><span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span>
        <span class="s2">&quot;cols=80&quot;</span>
    <span class="p">)</span>
    <span class="n">sp_input</span><span class="o">.</span><span class="n">bind_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="p">,</span> <span class="s2">&quot;scad_prepend&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.highlight_code" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">highlight_code</span><span class="p">(</span><span class="n">_cargs</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>highlight the code and show the html</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">highlight_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_cargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    highlight the code and show the html</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">code_html</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">highlight_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">code_html</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highlight_button</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_trace</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.home" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">home</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Generates the home page with a 3D viewer and a code editor.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates the home page with a 3D viewer and a code editor.&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">setup_menu</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">column</span><span class="p">():</span>
        <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">splitter</span><span class="p">()</span> <span class="k">as</span> <span class="n">splitter</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">before</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grid_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                    <span class="s2">&quot;toggle grid&quot;</span><span class="p">,</span>
                    <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_grid</span><span class="p">,</span>
                    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;grid_off&quot;</span><span class="p">,</span>
                    <span class="n">toggle_icon</span><span class="o">=</span><span class="s2">&quot;grid_on&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axes_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                    <span class="s2">&quot;toggle axes&quot;</span><span class="p">,</span>
                    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;polyline&quot;</span><span class="p">,</span>
                    <span class="n">toggle_icon</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span>
                    <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_axes</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">button</span><span class="p">(</span>
                    <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;colorize&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span>
                <span class="p">)</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">color_picker</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">color_picker</span><span class="p">(</span><span class="n">on_pick</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pick_color</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>

                <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">scene</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">768</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">scene</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span>
                    <span class="n">scene</span><span class="o">.</span><span class="n">spot_light</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">intensity</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">splitter</span><span class="o">.</span><span class="n">after</span><span class="p">:</span>
                    <span class="k">with</span> <span class="n">ui</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full&quot;</span><span class="p">):</span>
                        <span class="n">extensions</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;scad&quot;</span><span class="p">:</span> <span class="s2">&quot;.scad&quot;</span><span class="p">,</span> <span class="s2">&quot;xml&quot;</span><span class="p">:</span> <span class="s2">&quot;.xml&quot;</span><span class="p">}</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">example_selector</span> <span class="o">=</span> <span class="n">FileSelector</span><span class="p">(</span>
                            <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">,</span>
                            <span class="n">extensions</span><span class="o">=</span><span class="n">extensions</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_input</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">input</span><span class="p">(</span>
                            <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_changed</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;size=100&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">highlight_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;highlight&quot;</span><span class="p">,</span>
                            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">,</span>
                            <span class="n">toggle_icon</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">highlight_code</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;save&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;save&quot;</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save_file</span>
                            <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;reload&quot;</span><span class="p">,</span>
                            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_file</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;open&quot;</span><span class="p">,</span>
                                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;file_open&quot;</span><span class="p">,</span>
                                <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_file</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">tool_button</span><span class="p">(</span>
                            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;render&quot;</span><span class="p">,</span>
                            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;play_circle&quot;</span><span class="p">,</span>
                            <span class="n">handler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">link</span><span class="p">(</span>
                            <span class="s2">&quot;stl result&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;/stl/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">new_tab</span><span class="o">=</span><span class="kc">True</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span>
                            <span class="s2">&quot;dots&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;lg&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">ui</span><span class="o">.</span><span class="n">textarea</span><span class="p">(</span>
                                <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">on_change</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">code_changed</span>
                            <span class="p">)</span>
                            <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;clearable&quot;</span><span class="p">)</span>
                            <span class="o">.</span><span class="n">props</span><span class="p">(</span><span class="s2">&quot;rows=25&quot;</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">html</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">html_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log_view</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">max_lines</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="s2">&quot;w-full h-40&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_footer</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.open_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">open_file</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Opens a Local filer picker dialog and reads the selected input file.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">open_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Opens a Local filer picker dialog and reads the selected input file.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">:</span>
        <span class="n">pick_list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">LocalFilePicker</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pick_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">input_file</span> <span class="o">=</span> <span class="n">pick_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_and_optionally_render</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.pick_color" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pick_color</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Asynchronously picks a color based on provided event arguments.</p>
<p>This function changes the color of the 'color_picker_button' and the 'stl_object'
according to the color specified in the event arguments.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>e</code></td>
            <td>
                  <code><span title="nicegui.events.ColorPickEventArguments">ColorPickEventArguments</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An object containing event-specific arguments.
The 'color' attribute of this object specifies the color to be applied.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>If 'stl_object' is None, the function will only change the color of 'color_picker_button'.
Otherwise, it changes the color of both 'color_picker_button' and 'stl_object'.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">pick_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ColorPickEventArguments</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously picks a color based on provided event arguments.</span>

<span class="sd">    This function changes the color of the &#39;color_picker_button&#39; and the &#39;stl_object&#39;</span>
<span class="sd">    according to the color specified in the event arguments.</span>

<span class="sd">    Args:</span>
<span class="sd">        e (ColorPickEventArguments): An object containing event-specific arguments.</span>
<span class="sd">            The &#39;color&#39; attribute of this object specifies the color to be applied.</span>

<span class="sd">    Note:</span>
<span class="sd">        If &#39;stl_object&#39; is None, the function will only change the color of &#39;color_picker_button&#39;.</span>
<span class="sd">        Otherwise, it changes the color of both &#39;color_picker_button&#39; and &#39;stl_object&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;background-color:</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">!important&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.prepare_ui" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare_ui</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>handle the command line arguments</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle the command line arguments</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">InputWebSolution</span><span class="o">.</span><span class="n">prepare_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_pygments</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.read_input" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_input</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Reads the given input and handles any exceptions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>input_str</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input string representing a URL or local file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">read_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads the given input and handles any exceptions.</span>

<span class="sd">    Args:</span>
<span class="sd">        input_str (str): The input string representing a URL or local file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;reading </span><span class="si">{</span><span class="n">input_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_read_input</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_input</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">input_str</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_view</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_msg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.render" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">render</span><span class="p">(</span><span class="n">_click_args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Renders the OpenScad string and updates the 3D scene with the result.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>click_args</code></td>
            <td>
                  <code>object</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The click event arguments.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_click_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Renders the OpenScad string and updates the 3D scene with the result.</span>

<span class="sd">    Args:</span>
<span class="sd">        click_args (object): The click event arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;rendering ...&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
        <span class="n">openscad_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_area</span><span class="o">.</span><span class="n">value</span>
        <span class="n">stl_path</span> <span class="o">=</span> <span class="n">stl_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span><span class="p">)</span>
        <span class="n">render_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">openscad_str_to_file</span><span class="p">(</span>
            <span class="n">openscad_str</span><span class="p">,</span> <span class="n">stl_path</span>
        <span class="p">)</span>
        <span class="c1"># show render result in log</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_view</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">render_result</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">render_result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="s2">&quot;stl created ... loading into scene&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stl_link</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color_picker_button</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">stl</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/stl/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stl_name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stl_object</span><span class="o">.</span><span class="n">material</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stl_color</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_trace</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress_view</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.save_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_file</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Saves the current code to the last input file, if it was a local path.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves the current code to the last input file, if it was a local path.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="si">}</span><span class="s2"> saved&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No local file to save to&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.setup_pygments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_pygments</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>prepare pygments syntax highlighting by loading style</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_pygments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    prepare pygments syntax highlighting by loading style</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pygments_css_file</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;web&quot;</span> <span class="o">/</span> <span class="s2">&quot;static&quot;</span> <span class="o">/</span> <span class="s2">&quot;css&quot;</span> <span class="o">/</span> <span class="s2">&quot;pygments.css&quot;</span>
    <span class="p">)</span>
    <span class="n">pygments_css</span> <span class="o">=</span> <span class="n">pygments_css_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
    <span class="n">ui</span><span class="o">.</span><span class="n">add_head_html</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;style&gt;</span><span class="si">{</span><span class="n">pygments_css</span><span class="si">}</span><span class="s2">&lt;/style&gt;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.toggle_axes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_axes</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>toggle the axes of my scene</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">toggle_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    toggle the axes of my scene</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes_button</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span> <span class="o">=</span> <span class="n">AxesHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_view</span><span class="o">.</span><span class="n">toggle_axes</span><span class="p">()</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadSolution.toggle_grid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toggle_grid</span><span class="p">(</span><span class="n">_ea</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>toogle the grid of my scene</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">toggle_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ea</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    toogle the grid of my scene</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s2">&quot;grid&quot;</span><span class="p">]</span>
        <span class="n">grid_str</span> <span class="o">=</span> <span class="s2">&quot;off&quot;</span> <span class="k">if</span> <span class="n">grid</span> <span class="k">else</span> <span class="s2">&quot;on&quot;</span>
        <span class="n">grid_js</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span> <span class="k">if</span> <span class="n">grid</span> <span class="k">else</span> <span class="s2">&quot;true&quot;</span>
        <span class="c1"># try toggling grid</span>
        <span class="n">ui</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;setting grid to </span><span class="si">{</span><span class="n">grid_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">grid</span>
        <span class="c1"># workaround according to https://github.com/zauberzeug/nicegui/discussions/1246</span>
        <span class="n">js_cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;scene_c</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">.children.find(c =&gt; c.type === &quot;GridHelper&quot;).visible = </span><span class="si">{</span><span class="n">grid_js</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">await</span> <span class="n">ui</span><span class="o">.</span><span class="n">run_javascript</span><span class="p">(</span><span class="n">js_cmd</span><span class="p">,</span> <span class="n">respond</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">_props</span><span class="p">[</span><span class="s2">&quot;grid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="c1"># try toggling icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggle_icon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_button</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handleExeption</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="nicescad.webserver.NiceScadWebServer" class="doc doc-heading">
            <code>NiceScadWebServer</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ngwidgets.input_webserver.InputWebserver">InputWebserver</span></code></p>


      <p>WebServer class that manages the server and handles OpenScad operations.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="nicescad.webserver.NiceScadWebServer.oscad">oscad</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="nicescad.openscad.OpenScad" href="#nicescad.openscad.OpenScad">OpenScad</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An OpenScad object that aids in performing OpenScad operations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>nicescad/webserver.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">NiceScadWebServer</span><span class="p">(</span><span class="n">InputWebserver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;WebServer class that manages the server and handles OpenScad operations.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        oscad (OpenScad): An OpenScad object that aids in performing OpenScad operations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WebserverConfig</span><span class="p">:</span>
        <span class="n">copy_right</span> <span class="o">=</span> <span class="s2">&quot;(c)2023-2024 Wolfgang Fahl&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">WebserverConfig</span><span class="p">(</span>
            <span class="n">copy_right</span><span class="o">=</span><span class="n">copy_right</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">Version</span><span class="p">(),</span>
            <span class="n">default_port</span><span class="o">=</span><span class="mi">9858</span><span class="p">,</span>
            <span class="n">short_name</span><span class="o">=</span><span class="s2">&quot;nicescad&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">server_config</span> <span class="o">=</span> <span class="n">WebserverConfig</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="n">server_config</span><span class="o">.</span><span class="n">solution_class</span> <span class="o">=</span> <span class="n">NiceScadSolution</span>
        <span class="k">return</span> <span class="n">server_config</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructs all the necessary attributes for the WebServer object.&quot;&quot;&quot;</span>
        <span class="n">InputWebserver</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span> <span class="o">=</span> <span class="n">OpenScad</span><span class="p">(</span>
            <span class="n">scad_prepend</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;//https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/Other_Language_Features#$fa,_$fs_and_$fn</span>
<span class="s2">// default number of facets for arc generation</span>
<span class="s2">$fn=30;</span>
<span class="s2">&quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">add_static_files</span><span class="p">(</span><span class="s2">&quot;/stl&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">configure_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">root_path</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">root_path</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">root_path</span>
            <span class="k">else</span> <span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">examples_path</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">root_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allowed_urls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;https://raw.githubusercontent.com/WolfgangFahl/nicescad/main/examples/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;https://raw.githubusercontent.com/openscad/openscad/master/examples/&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">examples_path</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root_path</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">examples_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># the root directory (default: examples)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;../nicescad_examples&quot;</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="nicescad.webserver.NiceScadWebServer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructs all the necessary attributes for the WebServer object.</p>

            <details class="quote">
              <summary>Source code in <code>nicescad/webserver.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructs all the necessary attributes for the WebServer object.&quot;&quot;&quot;</span>
        <span class="n">InputWebserver</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">NiceScadWebServer</span><span class="o">.</span><span class="n">get_config</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span> <span class="o">=</span> <span class="n">OpenScad</span><span class="p">(</span>
            <span class="n">scad_prepend</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;//https://en.wikibooks.org/wiki/OpenSCAD_User_Manual/Other_Language_Features#$fa,_$fs_and_$fn</span>
<span class="s2">// default number of facets for arc generation</span>
<span class="s2">$fn=30;</span>
<span class="s2">&quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">add_static_files</span><span class="p">(</span><span class="s2">&quot;/stl&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oscad</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>